package TP.PR1.MV;

public class CommandParser {
	public static Command parse(String line){
		String[] subcadenas=line.split(" ");
		Command comando;
		
		if (subcadenas.length == 1){
			switch (subcadenas[0]){
			case "help": comando=new Command(ENUM_COMMAND.HELP); break;
			case "quit": comando=new Command(ENUM_COMMAND.QUIT); break;
			case "run": comando=new Command(ENUM_COMMAND.RUN); break;
			case "reset": comando=new Command(ENUM_COMMAND.RESET); break;
			default: return null;
			}
		}
		else if (subcadenas[0] == "replace" && subcadenas.length == 2){
			int rep = Integer.parseInt(subcadenas[1]);
			comando=new Command(rep);
		}
		else if (subcadenas[0] == "newinst") {
			if (subcadenas.length > 1){
				String s = subcadenas[1];
				for (int i=2; i<subcadenas.length; ++i){
					s+=subcadenas[i];
				}
				ByteCode bc = parse(s);
				comando=new Command(bc);
			}
			else return null;
		}
		else return null;
		
		return comando;
	}
}
