package TP.PR1.MV;

import java.util.Scanner;

public class ByteCodeProgram {
	private ByteCode[] program;
	int newinst;
	
	public ByteCodeProgram(){
		this.program = new ByteCode[100];
		this.newinst=0;
	}
	public void mostrar(){
		System.out.println("Programa almacenado:");
		String cadena;
		
		for (int i=0; i<this.newinst; ++i){
			cadena = Integer.toString(i);
			cadena += ": " + this.program[i].toString();
			System.out.println(cadena);
		}
	}
	public boolean pushbc(ByteCode bc){
		if (bc.comprobarbc()){
			this.program[this.newinst] = bc;
			++this.newinst;
			return true;
		}
		else return false;
	}
	public void reset(){ this.newinst=0; }
	
	public boolean replace(int n){
		if (n > 0 && n < this.newinst){
			System.out.print("Nueva instruccion: ");
			
			Scanner entrada = new Scanner(System.in);
			String strbc=entrada.nextLine();
			
			ByteCode bc = ByteCodeParser.parse(strbc);
			if (bc.comprobarbc()){
				this.program[n]=bc;
				return true;
			}
			else return false;
		}
		else return false;
	}
	public ByteCode instn(int n){
		return this.program[n];
	}
	public int getTam(){
		return this.newinst;
	}
}
