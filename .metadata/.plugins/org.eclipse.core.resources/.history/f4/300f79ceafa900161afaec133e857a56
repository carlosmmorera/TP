package TP.PR1.MV;

public class CPU {
	private Memory memoria;
	private OperandStack pila;
	private boolean end;
	
	public boolean execute(ByteCode instr){
		ENUM_BYTECODE inst = instr.getEnum();
		switch (inst){
		case PUSH: pila.pushop(instr.getParam()); return true;
		case LOAD: return this.load(instr.getParam());
		case STORE: return this.memoria.write(instr.getParam(), pila.pop());
		case ADD: pila.pushop(pila.pop() + pila.pop()); return true;
		case SUB: int op2 = pila.pop(); pila.pushop(pila.pop() - op2); return true;
		case MUL: pila.pushop(pila.pop() * pila.pop()); return true;
		}
	}
	public boolean load(int pos){
		Integer elem = this.memoria.read(pos);
		if (elem != null){
			this.pila.pushop(elem);
			return true;
		}
		else return false;
	}
}
